(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(71)},28:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},49:function(e,t,a){},51:function(e,t,a){},53:function(e,t,a){},55:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(18),l=a.n(s),c=a(74),o=a(76),i=a(73),m=a(1),u=a(2),d=a(5),h=a(4),p=a(6),f=a(7),v=a(75),g=(a(28),function(e){var t=e.className;return r.a.createElement("div",{className:"sk-circle"},r.a.createElement("div",{className:"sk-circle1 sk-child ".concat(t)}),r.a.createElement("div",{className:"sk-circle2 sk-child ".concat(t)}),r.a.createElement("div",{className:"sk-circle3 sk-child ".concat(t)}),r.a.createElement("div",{className:"sk-circle4 sk-child ".concat(t)}),r.a.createElement("div",{className:"sk-circle5 sk-child ".concat(t)}),r.a.createElement("div",{className:"sk-circle6 sk-child ".concat(t)}),r.a.createElement("div",{className:"sk-circle7 sk-child ".concat(t)}),r.a.createElement("div",{className:"sk-circle8 sk-child ".concat(t)}),r.a.createElement("div",{className:"sk-circle9 sk-child ".concat(t)}),r.a.createElement("div",{className:"sk-circle10 sk-child ".concat(t)}),r.a.createElement("div",{className:"sk-circle11 sk-child ".concat(t)}),r.a.createElement("div",{className:"sk-circle12 sk-child ".concat(t)}))}),b=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={username:"",password:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.password,s=this.props,l=s.isLoading,c=s.handleLogin,o=s.message,i=s.handleFormChange;return r.a.createElement("div",{className:"col-md-9 col-lg-8 mx-auto"},r.a.createElement("h3",{className:"login-heading mb-4"},"Welcome back!"),r.a.createElement("div",null,r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{required:!0,autoFocus:!0,type:"text",id:"username",value:a,placeholder:"Username",className:"form-control","aria-describedby":"emailHelp",onChange:function(t){var a=t.target;e.setState({username:a.value})}}),r.a.createElement("label",{htmlFor:"username"},"Username")),r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{required:!0,id:"password",type:"password",value:n,placeholder:"Password",className:"form-control",onChange:function(t){var a=t.target;e.setState({password:a.value})}}),r.a.createElement("label",{htmlFor:"password"},"Password")),r.a.createElement("button",{type:"submit",onClick:function(){return c(a,n)},className:"btn btn-lg button-active btn-block btn-login text-uppercase font-weight-bold mb-2"},l?r.a.createElement(g,{className:"white"}):"Login"),r.a.createElement("div",{className:"text-center"},r.a.createElement("small",{className:"form-text text-danger"},o),r.a.createElement("span",{className:"small item-link",onClick:i},"Haven't register yet?"))))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={name:"",email:"",username:"",password:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.email,s=t.username,l=t.password,c=this.props,o=c.message,i=c.isLoading,m=c.messageClass,u=c.handleFormChange,d=c.handleRegistration;return r.a.createElement("div",{className:"col-md-9 col-lg-8 mx-auto"},r.a.createElement("h3",{className:"login-heading mb-4"},"Register"),r.a.createElement("div",null,r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{required:!0,autoFocus:!0,type:"text",id:"username",value:s,className:"form-control","aria-describedby":"emailHelp",placeholder:"Enter username",onChange:function(t){var a=t.target;return e.setState({username:a.value})}}),r.a.createElement("label",{htmlFor:"username"},"Username")),r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{required:!0,id:"name",type:"text",value:a,className:"form-control","aria-describedby":"emailHelp",placeholder:"Enter full name",onChange:function(t){var a=t.target;return e.setState({name:a.value})}}),r.a.createElement("label",{htmlFor:"name"},"Name")),r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{required:!0,id:"email",type:"email",value:n,className:"form-control",placeholder:"Enter email","aria-describedby":"emailHelp",onChange:function(t){var a=t.target;return e.setState({email:a.value})}}),r.a.createElement("label",{htmlFor:"email"},"Email")),r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{required:!0,id:"password",type:"password",value:l,className:"form-control",placeholder:"Password",onChange:function(t){var a=t.target;return e.setState({password:a.value})}}),r.a.createElement("label",{htmlFor:"password"},"Password")),r.a.createElement("button",{type:"submit",onClick:function(){return d(n,s,l,a)},className:"btn btn-lg button-active btn-block btn-login text-uppercase font-weight-bold mb-2"},i?r.a.createElement(g,{className:"white"}):"Register"),r.a.createElement("div",{className:"text-center"},r.a.createElement("small",{id:"emailHelp",className:"form-text text-".concat(m)},o),r.a.createElement("span",{className:"small item-link",onClick:u},"Login"))))}}]),t}(n.Component),N="https://bitbookapi.azurewebsites.net/api",y="".concat(N,"/users"),k="".concat(N,"/login"),w="".concat(N,"/posts"),C="".concat(N,"/profile"),O="".concat(N,"/comments"),j="".concat(N,"/register"),x={method:"GET",headers:{"Content-Type":"application/json",Key:"bitbookdev",SessionId:sessionStorage.getItem("sessionId")}},S={method:"DELETE",headers:{"Content-Type":"application/json; charset=utf-8",Key:"bitbookdev",SessionId:sessionStorage.getItem("sessionId")}},I=new(function(){function e(){Object(m.a)(this,e)}return Object(u.a)(e,[{key:"get",value:function(e){return fetch(e,x).then(function(e){return e.json()})}},{key:"post",value:function(e,t){return fetch(e,(a=t,{method:"POST",headers:{"Content-Type":"application/json",Key:"bitbookdev",SessionId:sessionStorage.getItem("sessionId")},body:JSON.stringify(a)})).then(function(e){var t=e.status;if(t>=200&&t<300)return"Success!";throw new Error("Faild!")});var a}},{key:"put",value:function(e,t){return fetch(e,(a=t,{method:"PUT",headers:{"Content-Type":"application/json",Key:"bitbookdev",SessionId:sessionStorage.getItem("sessionId")},body:JSON.stringify(a)})).then(function(e){var t=e.status,a=e.statusText;return t>=200&&t<300?e:Promise.reject("".concat(t," ").concat(a))});var a}},{key:"delete",value:function(e){return fetch(e,S).then(function(e){return e.json()})}},{key:"authentication",value:function(e,t){return fetch(e,(a=t,{method:"POST",headers:{"Content-Type":"application/json",Key:"bitbookdev"},body:JSON.stringify(a)})).then(function(e){return e.json()});var a}}]),e}()),P=new(function(){function e(){Object(m.a)(this,e)}return Object(u.a)(e,[{key:"login",value:function(e){return I.authentication(k,e).then(function(e){if(e.hasOwnProperty("error"))throw new Error(e.error.message);return e.sessionId})}}]),e}()),D=new function e(){Object(m.a)(this,e),this.register=function(e){return I.authentication(j,e).then(function(e){if(e.hasOwnProperty("error"))throw new Error(e.error.message);return{message:"Registration was successfull! You can login now!"}})}},U=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={message:"",messageClass:"",isLoading:!1,isLoginForm:!0},a.handleLogin=a.handleLogin.bind(Object(f.a)(Object(f.a)(a))),a.handleRegistration=a.handleRegistration.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleLogin",value:function(e,t){var a=this,n={username:e,password:t};this.setState({isLoading:!0}),P.login(n).then(function(e){sessionStorage.setItem("sessionId",e),window.location.reload()}).catch(function(e){var t=e.message;return a.setState({message:t,isLoading:!1})})}},{key:"handleRegistration",value:function(e,t,a,n){var r=this,s={name:n,email:e,username:t,password:a};D.register(s).then(function(e){var t=e.message;return r.setState({message:t,messageClass:"success"})}).catch(function(e){var t=e.message;return r.setState({message:t,messageClass:"danger"})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.message,s=t.messageClass,l=t.isLoginForm;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row no-gutter"},r.a.createElement("div",{className:"d-none d-md-flex col-md-4 col-lg-6 bg-image"}),r.a.createElement("div",{className:"col-md-8 col-lg-6"},r.a.createElement("div",{className:"login d-flex align-items-center py-5"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},l?r.a.createElement(b,{message:n,isLoading:a,handleLogin:this.handleLogin,handleFormChange:function(){return e.setState({isLoginForm:!1,message:""})}}):r.a.createElement(E,{message:n,isLoading:a,messageClass:s,handleRegistration:this.handleRegistration,handleFormChange:function(){return e.setState({isLoginForm:!0,message:""})}})))))))}}]),t}(n.Component),T=Object(v.a)(U),F=a(21),L=function(e){var t=e.text;return r.a.createElement("p",{className:"card-text"},t)},M=function(){function e(t,a,n,r,s,l,c){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"http://sg-fs.com/wp-content/uploads/2017/08/user-placeholder.png";Object(m.a)(this,e),this.id=t,this.name=a,this.image=o,this.email=n,this.postNumber=r,this.description=s,this.lastPostDate=l,this.commentNumber=c}return Object(u.a)(e,[{key:"getFormatedTime",value:function(){return this.lastPostDate.toLocaleTimeString("en-GB",{hour12:!1})}},{key:"getFormatedDate",value:function(){var e="".concat(this.lastPostDate.toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}),", ").concat(this.lastPostDate.toLocaleTimeString("en-GB",{hour12:!1}));return 1970!==this.lastPostDate.getFullYear()?e:"No posts"}},{key:"getElapsedTime",value:function(){var e=Math.floor((new Date-this.lastPostDate)/1e3),t=Math.floor(e/31536e3);return t>=1?t>1?t+" years":t+" year":(t=Math.floor(e/2592e3))>=1?t>1?t+" months":t+" month":(t=Math.floor(e/86400))>=1?t>1?t+" days":t+" day":(t=Math.floor(e/3600))>=1?t>1?t+" hours":t+" hour":(t=Math.floor(e/60))>=1?t>1?t+" minuts":t+" minut":e>1?e+" seconds":e+" second"}}]),e}(),V=new(function(){function e(){Object(m.a)(this,e)}return Object(u.a)(e,[{key:"getProfile",value:function(){return I.get(C).then(function(e){if(e.hasOwnProperty("message"))throw new Error(e.message);var t=e.name,a=e.email,n=e.about,r=e.userId,s=e.avatarUrl,l=e.postsCount,c=e.commentsCount;return new M(r,t,a,l,n,null,c,s)})}},{key:"getUsers",value:function(){return I.get(y).then(function(e){if(e.hasOwnProperty("message"))throw new Error(e.message);return e.map(function(e){var t=e.id,a=e.name,n=e.aboutShort,r=e.lastPostDate,s=e.avatarUrl,l=new Date(r).getTime()+72e5;return new M(t,a,null,null,n,new Date(l),null,s)})})}},{key:"getSingleUser",value:function(e){var t="".concat(y,"/").concat(e);return I.get(t).then(function(e){if(e.hasOwnProperty("message"))throw new Error(e.message);var t=e.name,a=e.email,n=e.about,r=e.userId,s=e.avatarUrl,l=e.postsCount,c=e.lastPostDate,o=e.commentsCount,i=new Date(c).getTime()+72e5;return new M(r,t,a,l,n,new Date(i),o,s)})}},{key:"editProfile",value:function(e){return I.put("".concat(C,"s"),e)}}]),e}()),R=(a(33),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={post:a.props.post,userImg:"http://sg-fs.com/wp-content/uploads/2017/08/user-placeholder.png"},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;V.getSingleUser(this.state.post.userId).then(function(t){var a=t.image;return e.setState({userImg:a})})}},{key:"render",value:function(){var e=this.state,t=e.post,a=e.userImg;return r.a.createElement(n.Fragment,null,r.a.createElement("h5",{className:"card-title item-link mb-0 fit-content",onClick:this.props.handleUserClick},r.a.createElement("img",{className:"d-flex mr-2 rounded-circle feed-img float-left",src:a,alt:"avatar"}),t.userDisplayName),r.a.createElement("small",{className:"text-muted"},t.getElapsedTime()," ago"))}}]),t}(n.Component)),A=function(e){var t=e.videoUrl;return r.a.createElement("div",{className:"embed-responsive embed-responsive-16by9 "},r.a.createElement("iframe",{className:"embed-responsive-item card-img-top",src:t,allowFullScreen:!0,title:"post video"}))},H=function(e){var t=e.imageUrl;return r.a.createElement("img",{className:"card-img-top",src:t,alt:"post"})},B=(a(35),Object(v.a)(function(e){var t=e.post,a=e.history,n=t.id,s=t.type,l=t.text,c=t.userId,o=t.imageUrl,i=t.videoUrl,m=t.commentsNum;return r.a.createElement("div",{className:"card mb-4 item-decoration border-0 shadow",onClick:function(){a.push({pathname:"/post-details",state:{id:n,type:s,userId:c}})}},r.a.createElement("div",{className:"card-body"},r.a.createElement(R,{post:t,handleUserClick:function(e){e.stopPropagation(),a.push({pathname:"/profile",state:{userId:c}})}}),r.a.createElement("hr",{className:"my-1"}),l?r.a.createElement(L,{text:l}):null),o?r.a.createElement(H,{imageUrl:o}):null,i?r.a.createElement(A,{videoUrl:i}):null,r.a.createElement("div",{className:"card-footer text-muted"},r.a.createElement("small",{className:"text-muted float-right"},m," ",r.a.createElement("i",{className:"fas fa-comments"})),r.a.createElement("small",{className:"text-muted float-left mr-2"},t.getCapitalType()," post")))})),q=function(e){return e.posts.map(function(e){return r.a.createElement(B,{key:e.id,post:e})})},W=function(e){var t=e.handleChange;return r.a.createElement("div",{className:"card my-4 border-0 shadow sticky-second"},r.a.createElement("h5",{className:"card-header button-active"},"Filter posts"),r.a.createElement("div",{className:"card-body bg-light"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend rounded"},r.a.createElement("label",{className:"input-group-text button-active",htmlFor:"inputGroupSelect01"},"By type")),r.a.createElement("select",{className:"custom-select",id:"inputGroupSelect01",onChange:t},r.a.createElement("option",{value:"all"},"All"),r.a.createElement("option",{value:"text"},"Text"),r.a.createElement("option",{value:"image"},"Image"),r.a.createElement("option",{value:"video"},"Video")))))))},G=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={search:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.search,a=this.props,n=a.title,s=a.handleSearch;return r.a.createElement("div",{className:"card my-4 border-0 shadow sticky-first"},r.a.createElement("h5",{className:"card-header button-active"},n),r.a.createElement("div",{className:"card-body bg-light"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",value:t,placeholder:"Search by users",className:"form-control",onChange:function(t){var a=t.target;return e.setState({search:a.value})}}),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{type:"button",className:"btn button-active",onClick:function(){return s(t)}},r.a.createElement("i",{className:"fas fa-search"}))))))}}]),t}(n.Component),J=(a(37),function(e){var t=e.className;return r.a.createElement("div",{className:t},r.a.createElement("p",{className:"result-message"},r.a.createElement("i",{className:"fas fa-search"}),"We couldn't find any matching result"))}),K=new(function(){function e(){Object(m.a)(this,e)}return Object(u.a)(e,[{key:"isTextValid",value:function(e){return!(e.includes("http")||e.includes("<")||e.includes("www"))}},{key:"isImageUrlValid",value:function(e){var t,a=e.split(".");switch(a[a.length-1].toLowerCase()){case"jpg":case"png":case"svg":case"gif":t=!0;break;default:t=!1}return!(!e.startsWith("https://")&&!e.startsWith("http://")||!t)}},{key:"isVideoUrlValid",value:function(e){return!(!e.startsWith("https://www.youtube.com")&&!e.startsWith("http://www.youtube.com")||!e.includes("watch?v=")&&!e.includes("embed"))}},{key:"isNameValid",value:function(e){return e.length>2&&e.length<31}},{key:"isEmailValid",value:function(e){return!(!e.includes("@")||!e.includes(".com"))}}]),e}()),Q=function(){function e(t,a,n,r,s,l){Object(m.a)(this,e),this.id=t,this.type=a,this.userId=n,this.commentsNum=r,this.dateCreated=l,this.userDisplayName=s}return Object(u.a)(e,[{key:"isVideo",value:function(){return"video"===this.type}},{key:"isImage",value:function(){return"image"===this.type}},{key:"getCapitalType",value:function(){return this.type.charAt(0).toUpperCase()+this.type.slice(1).toLowerCase()}},{key:"getFormatedTime",value:function(){return this.dateCreated.toLocaleTimeString("en-GB",{hour12:!1})}},{key:"getFormatedDate",value:function(){return this.dateCreated.toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"})}},{key:"getElapsedTime",value:function(){var e=Math.floor((new Date-this.dateCreated)/1e3),t=Math.floor(e/31536e3);return t>=1?t>1?t+" years":t+" year":(t=Math.floor(e/2592e3))>=1?t>1?t+" months":t+" month":(t=Math.floor(e/86400))>=1?t>1?t+" days":t+" day":(t=Math.floor(e/3600))>=1?t>1?t+" hours":t+" hour":(t=Math.floor(e/60))>=1?t>1?t+" minuts":t+" minut":e>1?e+" seconds":e+" second"}}]),e}(),Y=function(e){function t(e,a,n,r,s,l,c){var o;return Object(m.a)(this,t),(o=Object(d.a)(this,Object(h.a)(t).call(this,e,a,r,s,l,c))).text=n,o}return Object(p.a)(t,e),t}(Q),z=function(e){function t(e,a,n,r,s,l,c){var o;return Object(m.a)(this,t),(o=Object(d.a)(this,Object(h.a)(t).call(this,e,a,n,s,l,c))).videoUrl=r,o}return Object(p.a)(t,e),t}(Q),X=function(e){function t(e,a,n,r,s,l,c){var o;return Object(m.a)(this,t),(o=Object(d.a)(this,Object(h.a)(t).call(this,e,a,n,s,l,c))).imageUrl=r,o}return Object(p.a)(t,e),t}(Q),Z=new(function(){function e(){Object(m.a)(this,e)}return Object(u.a)(e,[{key:"getPosts",value:function(){return I.get(w).then(function(e){if(e.hasOwnProperty("message"))throw new Error(e.message);return e.filter(function(e){return!e.hasOwnProperty("videoUrl")||e.videoUrl.includes("https://www.youtube.com/embed/")}).map(function(e){var t=e.id,a=e.type,n=e.text,r=e.userId,s=e.imageUrl,l=e.videoUrl,c=e.commentsNum,o=e.dateCreated,i=e.userDisplayName,m=new Date(o).getTime()+72e5;switch(a){case"image":return new X(t,a,r,s,c,i,new Date(m));case"video":return new z(t,a,r,l,c,i,new Date(m));case"text":return new Y(t,a,n,r,c,i,new Date(m));default:return null}})})}},{key:"getSinglePost",value:function(e,t){var a=function(e){switch(e){case"text":return"TextPosts";case"video":return"VideoPosts";case"image":return"ImagePosts"}}(t),n="".concat(N,"/").concat(a,"/").concat(e);return I.get(n).then(function(e){if(e.hasOwnProperty("message"))throw new Error(e.message);var t=e.id,a=e.type,n=e.text,r=e.userId,s=e.imageUrl,l=e.videoUrl,c=e.commentsNum,o=e.dateCreated,i=e.userDisplayName,m=new Date(o).getTime()+72e5;switch(a){case"image":return new X(t,a,r,s,c,i,new Date(m));case"video":return new z(t,a,r,l,c,i,new Date(m));case"text":return new Y(t,a,n,r,c,i,new Date(m));default:return null}})}},{key:"addPost",value:function(e,t){var a="".concat(N,"/").concat(t);return I.post(a,e)}},{key:"deletePost",value:function(e){var t="".concat(w,"/").concat(e);return I.delete(t).then(function(e){if(e.hasOwnProperty("message"))throw new Error("Something went wrong. Post can't be delted right now, please try again later.");return console.info("Post wit id ".concat(e.id,", deleted")),"Post successfully deleted."})}}]),e}()),$=(a(39),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={message:"",postContent:"",messageClass:"",imageClass:"",videoClass:"",textClass:"active-type shadow-sm",whoIsActive:"TextPosts"},a.handlePostCreate=a.handlePostCreate.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"checkText",value:function(e){var t;t=K.isTextValid(e)?"":"Text can't include www, http or start with '<'",this.setState({message:t,messageClass:"danger"})}},{key:"checkImageUrl",value:function(e){var t;t=K.isImageUrlValid(e)?"":"Invalid format! Image link must start with http or https and end with jpg, svg, png or gif.",this.setState({message:t,messageClass:"danger"})}},{key:"checkVideoUrl",value:function(e){var t;t=K.isVideoUrlValid(e)?"":"Invalid format! YouTube embeded videos only.",this.setState({message:t,messageClass:"danger"})}},{key:"checkPostContent",value:function(e,t){switch(t){case"TextPosts":this.checkText(e);break;case"ImagePosts":this.checkImageUrl(e);break;case"VideoPosts":this.checkVideoUrl(e)}}},{key:"createPayload",value:function(e,t){switch(e){case"TextPosts":return{text:t};case"ImagePosts":return{imageUrl:t};case"VideoPosts":return{videoUrl:t}}}},{key:"handlePostCreate",value:function(){var e=this,t=this.state,a=t.postContent,n=t.whoIsActive;t.message||Z.addPost(this.createPayload(n,a),n).then(function(t){e.props.loadPosts(),e.setState({message:t,postContent:"",messageClass:"success"}),setTimeout(function(){e.setState({message:"",messageClass:""})},2e3)}).catch(function(t){var a=t.message;return e.setState({message:a,messageClass:"danger"})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.image,s=this.state,l=s.postContent,c=s.whoIsActive,o=s.messageClass,i=s.message,m=s.textClass,u=s.imageClass,d=s.videoClass;return r.a.createElement("div",{className:"card mb-4 shadow-sm"},r.a.createElement("h5",{className:"card-header button-active"},"Create post"),r.a.createElement("div",{className:"card-body bg-white shadow-sm"},r.a.createElement("div",{className:"input-group"},r.a.createElement("img",{src:n,className:"rounded-circle feed-img",alt:"avatar"}),r.a.createElement("input",{type:"text",value:l,className:"form-control border-0 pb-5 pt-4",placeholder:"What's on your mind, ".concat(a,"?"),onChange:function(t){var a=t.target;e.setState({postContent:a.value}),e.checkPostContent(a.value,c)},onBlur:function(){return setTimeout(function(){e.setState({message:"",postContent:"",messageClass:""})},200)}})),r.a.createElement("small",{className:"text-".concat(o)},i)),r.a.createElement("div",{className:"card-footer text-muted d-flex flex-row pt-0"},r.a.createElement("span",{className:"nav-link rounded-bottom ".concat(m),onClick:function(){e.setState({whoIsActive:"TextPosts",textClass:"active-type shadow-sm",imageClass:"",videoClass:""})}},r.a.createElement("i",{className:"fas fa-pencil-alt"})," Text"),r.a.createElement("span",{className:"nav-link rounded-bottom ".concat(u),onClick:function(){e.setState({whoIsActive:"ImagePosts",textClass:"",imageClass:"active-type shadow-sm",videoClass:""})}},r.a.createElement("i",{className:"fas fa-image"})," Image"),r.a.createElement("span",{className:"nav-link rounded-bottom ".concat(d),onClick:function(){e.setState({whoIsActive:"VideoPosts",textClass:"",imageClass:"",videoClass:"active-type shadow-sm"})}},r.a.createElement("i",{className:"fas fa-video"})," Video"),r.a.createElement("span",{className:"input-group-btn ml-auto"},r.a.createElement("button",{type:"button",className:"btn button-active mt-2 shadow-sm",onClick:this.handlePostCreate},"Post"))))}}]),t}(n.Component)),_=a(22),ee=Object(v.a)(function(e){var t=e.post,a=e.history,s=t.id,l=t.userDisplayName,c=t.commentsNum,o=t.type,i=t.userId;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"mx-4 my-0"},r.a.createElement("h6",{onClick:function(){a.push({pathname:"/post-details",state:{id:s,type:o}})},className:"m-0 item-link"},t.getCapitalType()," post"),r.a.createElement("small",{className:"text-muted float-right"},c," ",r.a.createElement("i",{className:"fas fa-comments"})),r.a.createElement("p",null,"by"," ",r.a.createElement("span",{onClick:function(){a.push({pathname:"/profile",state:{userId:i}})},className:"text-primary item-link"},l))),r.a.createElement("hr",{className:"my-1"}))}),te=function(e){var t=e.posts;return r.a.createElement("div",{className:"card my-4 shadow sticky-third most-commented"},r.a.createElement("h5",{className:"card-header button-active"},"Most commented"),r.a.createElement("div",{className:"card-body bg-light"},t?r.a.createElement(n.Fragment,null,function(e){return e.sort(function(e,t){var a=e.commentsNum,n=t.commentsNum;return a<n?1:a>n?-1:0}).slice(0,5)}(Object(_.a)(t)).map(function(e,t){return r.a.createElement(ee,{post:e,key:t})})):r.a.createElement(g,{className:"blue"})))},ae=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={posts:null,profile:null,filterParam:"all",searchResults:null},a.loadPosts=a.loadPosts.bind(Object(f.a)(Object(f.a)(a))),a.handleSearch=a.handleSearch.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"loadPosts",value:function(){var e=this;Z.getPosts().then(function(t){e.setState({posts:t,searchResults:t})}).catch(function(t){var a=t.message;e.props.history.push({pathname:"/error",state:{message:a}})})}},{key:"handleSearch",value:function(e){var t=this.state.posts.filter(function(t){return t.userDisplayName.includes(e)});this.setState({searchResults:t})}},{key:"componentDidMount",value:function(){var e=this;Promise.all([V.getProfile(),Z.getPosts()]).then(function(t){var a=Object(F.a)(t,2),n=a[0],r=a[1];sessionStorage.setItem("userId",n.id),e.setState({posts:r,profile:n,searchResults:r})}).catch(function(t){var a=t.message;e.props.history.push({pathname:"/error"}),console.error(a)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchResults,n=t.filterParam,s=t.posts,l=t.profile,c="all"===n?a:a.filter(function(e){return e.type===n});return r.a.createElement("main",{className:"container"},r.a.createElement("div",{className:"row d-flex flex-row-reverse"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(G,{title:"Search posts",handleSearch:this.handleSearch}),r.a.createElement(W,{handleChange:function(t){var a=t.target;return e.setState({filterParam:a.value})}}),r.a.createElement(te,{posts:s})),r.a.createElement("div",{className:"col-md-8"},l?r.a.createElement($,{loadPosts:this.loadPosts,name:l.name,image:l.image}):null,a?a.length?r.a.createElement(q,{posts:c}):r.a.createElement(J,{className:"bg-light w-100 shadow py-3 border-thick"}):r.a.createElement(g,{className:"blue"}))))}}]),t}(n.Component),ne=a(72),re=(a(41),function(e){e.location;return r.a.createElement("main",{className:"container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"error-template"},r.a.createElement("h1",null,"Oops!"),r.a.createElement("h2",null,"404 Not Found"),r.a.createElement("div",{className:"error-details"},"Sorry, an error has occured, Requested page not found!"),r.a.createElement("div",{className:"error-actions"},r.a.createElement(ne.a,{to:"/",className:"btn btn-primary btn-lg"},r.a.createElement("i",{className:"fas fa-home"})," Take Me Home")))))))}),se=(a(43),Object(v.a)(function(e){var t=e.user,a=e.history,n=t.id,s=t.image,l=t.name,c=function(){return a.push({pathname:"/profile",state:{userId:n}})};return r.a.createElement("div",{className:"col-lg-4 col-sm-6 radius"},r.a.createElement("div",{className:"card people-card hovercard bg-white"},r.a.createElement("div",{className:"cardheader"}),r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{className:"bg-light border",alt:"avatar",src:s,onClick:c})),r.a.createElement("div",{className:"infot"},r.a.createElement("div",{className:"title"},r.a.createElement("div",{className:"item-link",onClick:c},l)),r.a.createElement("div",{className:"desc"},r.a.createElement("i",{className:"fas fa-wifi"})," ","49 years"===t.getElapsedTime()?"Long time ago":"".concat(t.getElapsedTime()," ago"))),r.a.createElement("div",{className:"bottom"},r.a.createElement("span",{className:"people-btn btn-info btn-twitter btn-sm m-1"},r.a.createElement("i",{className:"fas fa-user-plus"})),r.a.createElement("span",{className:"people-btn btn-success btn-sm m-1",onClick:c},r.a.createElement("i",{className:"fas fa-eye"})))))})),le=function(e){var t=e.users;return r.a.createElement("div",{className:"row"},t.map(function(e){return r.a.createElement(se,{user:e,key:e.id})}))},ce=(a(45),function(e){var t=e.children,a=e.linkTarget;return r.a.createElement("div",{id:"carouselExampleInterval",className:"carousel slide carousel-fade","data-ride":"carousel"},r.a.createElement("ol",{className:"carousel-indicators"},t.map(function(e,t){return r.a.createElement("li",{key:t,"data-target":"#carouselExampleInterval","data-slide-to":"".concat(t),className:t?"":"active"})})),r.a.createElement("a",{href:a,className:"carousel-link"},r.a.createElement("span",null,r.a.createElement("p",{className:"m-0 p-0"},"Scroll down"),r.a.createElement("i",{className:"fas fa-chevron-down m-0 p-0"}))),r.a.createElement("div",{className:"carousel-inner"},t))}),oe=Object(v.a)(function(e){var t=e.user,a=e.history,s=t.image,l=t.id,c=t.name,o=function(){a.push({pathname:"/profile",state:{userId:l}})};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"media mx-4 my-0"},r.a.createElement("img",{src:s,alt:"avatar",onClick:o,className:"d-flex rounded-circle comment-img item-link"}),r.a.createElement("div",{className:"p-1 fit-conten"},r.a.createElement("h6",{onClick:o,className:"m-0 item-link d-inline-block fit-content"},c))),r.a.createElement("small",{className:"text-muted pl-4"},"Last post: ",t.getElapsedTime()," ago"),r.a.createElement("hr",null))}),ie=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={users:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;V.getUsers().then(function(t){return e.setState({users:function(e){return e.sort(function(e,t){var a=new Date(e.lastPostDate),n=new Date(t.lastPostDate);return a<n?1:a>n?-1:0}).slice(0,5)}(t)})})}},{key:"render",value:function(){var e=this.state.users,t=this.props.withLink;return r.a.createElement("div",{className:"card my-4 shadow sticky-first"},r.a.createElement("h5",{className:"card-header button-active"},"Recently Active"),r.a.createElement("div",{className:"card-body bg-light"},e?r.a.createElement(n.Fragment,null,e.map(function(e,t){return r.a.createElement(oe,{user:e,key:t})}),t?r.a.createElement(ne.a,{to:"/people",className:"text-center text-muted mx-auto d-block"},"See more.."):null):r.a.createElement(g,{className:"blue"})))}}]),t}(n.Component),me=function(e){var t=e.imgSrc,a=e.text,n=e.active,s=void 0===n?"":n;return r.a.createElement("div",{className:"carousel-item ".concat(s),"data-interval":"1000"},r.a.createElement("img",{src:t,className:"d-block w-100",alt:"carousel cover"}),r.a.createElement("div",{className:"carousel-caption"},r.a.createElement("h1",null,r.a.createElement("img",{src:"https://i.imgur.com/Xa93F4x.png",alt:""})),r.a.createElement("p",{className:"lead"},a)))},ue=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={users:null,searchResult:null},a.handleSearch=a.handleSearch.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleSearch",value:function(e){var t=this.state.users.filter(function(t){return t.name.toLowerCase().includes(e.toLowerCase())});this.setState({searchResult:t})}},{key:"componentDidMount",value:function(){var e=this;V.getUsers().then(function(t){e.setState({users:t,searchResult:t})})}},{key:"render",value:function(){var e=this,t=this.state.searchResult;return r.a.createElement(n.Fragment,null,r.a.createElement(ce,{linkTarget:"#search"},r.a.createElement(me,{active:"active",text:"Meet amazing people.",imgSrc:"https://images.unsplash.com/photo-1491438590914-bc09fcaaf77a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"}),r.a.createElement(me,{text:"Share your funny stories...",imgSrc:"https://images.unsplash.com/photo-1504022462188-88f023db97bf?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80"}),r.a.createElement(me,{text:"...your happy moments...",imgSrc:"https://images.unsplash.com/photo-1489710437720-ebb67ec84dd2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80"}),r.a.createElement(me,{text:"...exciting trips...",imgSrc:"https://images.unsplash.com/photo-1520645521318-f03a712f0e67?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80"}),r.a.createElement(me,{text:"...and incredible adventures.",imgSrc:"https://images.unsplash.com/photo-1521336575822-6da63fb45455?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80"})),r.a.createElement("main",{className:"container",id:"search"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-lg-9"},r.a.createElement("div",{className:"input-group shadow sticky-header"},r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{type:"button",className:"btn button-active"},r.a.createElement("i",{className:"fas fa-search"}))),r.a.createElement("input",{type:"text",placeholder:"Search",className:"form-control",onChange:function(t){var a=t.target;return e.handleSearch(a.value)}})),t?t.length?r.a.createElement(le,{users:t}):r.a.createElement(J,{className:"bg-light w-100 shadow py-3 border-thick mt-3"}):r.a.createElement(g,{className:"blue mt-3"})),r.a.createElement("div",{className:"col-sm-12 col-lg-3"},r.a.createElement(ie,{withLink:!1})))))}}]),t}(n.Component),de=(a(47),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={userId:null,userName:"Profile",userImg:"http://sg-fs.com/wp-content/uploads/2017/08/user-placeholder.png"},a.handleLogout=a.handleLogout.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleLogout",value:function(){sessionStorage.clear()}},{key:"componentDidMount",value:function(){var e=this;V.getProfile().then(function(t){var a=t.name,n=t.image,r=t.id;return e.setState({userName:a,userImg:n,userId:r})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.userName,n=t.userImg,s=t.userId;return r.a.createElement("header",{className:"container-fluid primary-color navbar-dark sticky-top"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark primary-color container"},r.a.createElement(ne.a,{className:"navbar-brand",to:"/feed"},r.a.createElement("img",{src:"https://i.imgur.com/Xa93F4x.png",alt:"logo",className:"logo mr-1"})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item border-right border-primary"},r.a.createElement("span",{className:"nav-link py-0",onClick:function(){return e.props.history.push({pathname:"/profile",state:{userId:s}})}},r.a.createElement("img",{src:n,alt:"profile icon",className:"profile-icon rounded-circle bg-light"})," ",a)),r.a.createElement("li",{className:"nav-item border-right border-primary"},r.a.createElement(ne.a,{className:"nav-link py-0",to:"/feed"},r.a.createElement("i",{className:"fas fa-newspaper"})," Feed")),r.a.createElement("li",{className:"nav-item border-right border-primary"},r.a.createElement(ne.a,{className:"nav-link py-0",to:"/people"},r.a.createElement("i",{className:"fas fa-users"})," People")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(ne.a,{className:"nav-link py-0",to:"/",onClick:this.handleLogout},r.a.createElement("i",{className:"fas fa-sign-out-alt"})," Logout"))))))}}]),t}(n.Component)),he=Object(v.a)(de),pe=(a(49),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={id:null,name:"",email:"",errorUrl:"",errorName:"",avatarUrl:"",errorEmail:"",description:"",errorDescription:""},a.handleModalClose=a.handleModalClose.bind(Object(f.a)(Object(f.a)(a))),a.handleProfileEdit=a.handleProfileEdit.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleProfileEdit",value:function(){var e=this,t=this.state,a=t.id,n=t.name,r=t.email,s=t.errorUrl,l=t.avatarUrl,c=t.errorName,o=t.errorEmail,i=t.description,m=t.errorDescription;if(!s&&!c&&!o&&!m){var u={name:n,email:r,aboutShort:i,about:i,avatarUrl:l};V.editProfile(u).then(function(t){t.status>=200&&t.status<300&&e.props.loadProfile(a)})}}},{key:"handleModalClose",value:function(){var e=this.props.profile,t=e.name,a=e.email,n=e.description,r=e.image;this.setState({name:t,email:a,description:n,errorUrl:"",errorName:"",errorEmail:"",avatarUrl:r,errorDescription:""})}},{key:"checkName",value:function(e){var t;t=K.isNameValid(e)?K.isTextValid(e)?"":"Name can't include www, http or start with '<'":"Name can't be longer then 30 characters",this.setState({errorName:t})}},{key:"checkAvatarUrl",value:function(e){var t;t=K.isImageUrlValid(e)?"":"Invalid format! Link must start with http or https and end with jpg, svg, png or gif.",this.setState({errorUrl:t})}},{key:"checkEmail",value:function(e){var t;t=K.isEmailValid(e)?"":"Invalid format! Email must include @ and end with .com",this.setState({errorEmail:t})}},{key:"checkDescription",value:function(e){var t;t=K.isTextValid(e)?"":"Description can't include www, http or start with '<'",this.setState({errorDescription:t})}},{key:"componentDidUpdate",value:function(e){if(e.profile!==this.props.profile){var t=this.props.profile,a=t.id,n=t.name,r=t.email,s=t.description,l=t.image;this.setState({id:a,name:n,email:r,description:s,avatarUrl:l})}}},{key:"componentDidMount",value:function(){var e=this.props.profile,t=e.id,a=e.name,n=e.email,r=e.description,s=e.image;this.setState({id:t,name:a,email:n,description:r,avatarUrl:s})}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.email,s=t.errorUrl,l=t.avatarUrl,c=t.errorName,o=t.errorEmail,i=t.description,m=t.errorDescription;return r.a.createElement("div",{className:"modal fade",id:"editProfile",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header border-0 p-2 button-active"},r.a.createElement("h3",{className:"modal-title"},r.a.createElement("i",{className:"fas fa-cogs"})," Edit Profile")),r.a.createElement("div",{className:"modal-body p-2"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 col-sm-12"},r.a.createElement("img",{className:"my-0 mx-auto w-100",src:l||"http://via.placeholder.com/100x100",alt:"preview"}),r.a.createElement("button",{type:"button",className:"btn button-active my-2"},"UPLOAD PHOTO")),r.a.createElement("div",{className:"col-md-8 col-sm-12 mt-4"},r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{autoFocus:!0,type:"text",id:"name",value:a,className:"form-control",placeholder:"Enter name",onChange:function(t){var a=t.target;e.checkName(a.value),e.setState({name:a.value})}}),r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("small",{className:"text-danger"},c)),r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{type:"text",id:"email",value:n,className:"form-control",placeholder:"Enter email",onChange:function(t){var a=t.target;e.checkEmail(a.value),e.setState({email:a.value})}}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("small",{className:"text-danger"},o)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{type:"text",id:"avatarUrl",value:l,className:"form-control",placeholder:"Enter image url",onChange:function(t){var a=t.target;e.checkAvatarUrl(a.value),e.setState({avatarUrl:a.value})}}),r.a.createElement("label",{htmlFor:"avatarUrl"},"Image URL"),r.a.createElement("small",{className:"text-danger"},s))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{type:"text",id:"description",value:i,className:"form-control",placeholder:"Enter description",onChange:function(t){var a=t.target;e.checkDescription(a.value),e.setState({description:a.value})}}),r.a.createElement("label",{htmlFor:"username"},"Description"),r.a.createElement("small",{className:"text-danger"},m)))))),r.a.createElement("div",{className:"modal-footer border-0 p-2"},r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:this.closeEditProfileHandler},"CLOSE"),r.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.handleProfileEdit},"UPDATE")))))}}]),t}(n.Component)),fe=function(e){var t=e.profile,a=t.id,n=t.name,s=t.image,l=t.email,c=t.postNumber,o=t.description,i=t.commentNumber;return r.a.createElement("div",{className:"profile bg-light rounded"},r.a.createElement("img",{className:"profile-img bg-white border rounded shadow",src:s,alt:"avatar"}),r.a.createElement("div",{className:"profile-text mt-3"},r.a.createElement("h1",null,n),r.a.createElement("p",{className:"w-50 mx-auto"},o)),a===parseInt(sessionStorage.getItem("userId"))?r.a.createElement("div",{className:"w-100 text-center"},r.a.createElement("button",{className:"btn button-active fit-content shadow","data-toggle":"modal","data-target":"#editProfile"},r.a.createElement("i",{className:"fas fa-user-edit"})," Edit")):r.a.createElement("div",{className:"w-100 text-center"},r.a.createElement("button",{className:"btn button-active fit-content shadow"},r.a.createElement("i",{className:"fas fa-user-plus"})," Add Friend")),r.a.createElement("hr",null),r.a.createElement("h3",{className:"text-center"},"About"),r.a.createElement("p",{className:"text-center text-muted"},r.a.createElement("i",{className:"fas fa-envelope"})," ",l),r.a.createElement("div",{className:"w-100 d-flex justify-content-center"},r.a.createElement("button",{type:"button",className:"btn button-active mb-3 mr-5 shadow"},"Comments ",r.a.createElement("span",{className:"badge badge-light"},i)),r.a.createElement("button",{type:"button",className:"btn button-active mb-3 shadow"},"Posts ",r.a.createElement("span",{className:"badge badge-light"},c))))},ve=(a(51),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={profile:null},a.loadProfile=a.loadProfile.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"loadProfile",value:function(e){var t=this;V.getSingleUser(e).then(function(a){t.setState({profile:a,userId:e})})}},{key:"componentDidUpdate",value:function(e){e.location.state.userId!==this.props.location.state.userId&&this.loadProfile(this.props.location.state.userId)}},{key:"componentDidMount",value:function(){this.loadProfile(this.props.location.state.userId)}},{key:"render",value:function(){var e=this.state.profile;return r.a.createElement(n.Fragment,null,r.a.createElement("img",{className:"profile-cover container p-0",src:"https://images.unsplash.com/photo-1470219556762-1771e7f9427d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1489&q=80",alt:"cover"}),r.a.createElement("main",{className:"container p-0"},e?r.a.createElement(n.Fragment,null,r.a.createElement(fe,{profile:e}),r.a.createElement(pe,{loadProfile:this.loadProfile,profile:e})):r.a.createElement(g,{className:"blue"})))}}]),t}(n.Component)),ge=(a(53),function(){return r.a.createElement("footer",{className:"button-active"},r.a.createElement("p",{className:"container button-active"},"\xa9",(new Date).getFullYear()," Four in for"))}),be=(a(55),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={comment:a.props.comment,userImg:"http://sg-fs.com/wp-content/uploads/2017/08/user-placeholder.png"},a.handleUserClick=a.handleUserClick.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleUserClick",value:function(){this.props.history.push({pathname:"/profile",state:{userId:this.state.comment.authorId}})}},{key:"componentDidMount",value:function(){var e=this;V.getSingleUser(this.state.comment.authorId).then(function(t){var a=t.image;e.setState({userImg:a})})}},{key:"render",value:function(){var e=this.state,t=e.userImg,a=e.comment,n=a.body,s=a.authorName;return r.a.createElement("div",{className:"bg-light pt-1 radius"},r.a.createElement("div",{className:"media mx-4 mt-4 mb-1"},r.a.createElement("img",{src:t,alt:"avatar",onClick:this.handleUserClick,className:"d-flex mr-3 rounded-circle comment-img item-link"}),r.a.createElement("div",{className:"px-3 py-1 fit-content radius comment-item-bg"},r.a.createElement("h6",{onClick:this.handleUserClick,className:"m-0 item-link d-inline-block fit-content"},s)," ".concat(n))),r.a.createElement("small",{className:"text-muted ml-4"},a.getElapsedTime()," ago"),r.a.createElement("h5",{className:"text-primary float-right mr-3"},r.a.createElement("i",{className:"far fa-thumbs-up"})),r.a.createElement("hr",null))}}]),t}(n.Component)),Ee=Object(v.a)(be),Ne=function(){function e(t,a,n,r,s,l){Object(m.a)(this,e),this.id=t,this.body=a,this.postId=n,this.authorId=r,this.authorName=s,this.dateCreated=l}return Object(u.a)(e,[{key:"getFormatedTime",value:function(){return this.dateCreated.toLocaleTimeString("en-GB",{hour12:!1})}},{key:"getFormatedDate",value:function(){return this.dateCreated.toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"})}},{key:"getElapsedTime",value:function(){var e=Math.floor((new Date-this.dateCreated)/1e3),t=Math.floor(e/31536e3);return t>=1?t>1?t+" years":t+" year":(t=Math.floor(e/2592e3))>=1?t>1?t+" months":t+" month":(t=Math.floor(e/86400))>=1?t>1?t+" days":t+" day":(t=Math.floor(e/3600))>=1?t>1?t+" hours":t+" hour":(t=Math.floor(e/60))>=1?t>1?t+" minuts":t+" minut":e>1?e+" seconds":e+" second"}}]),e}(),ye=new(function(){function e(){Object(m.a)(this,e)}return Object(u.a)(e,[{key:"getComments",value:function(e){var t="".concat(O,"?postId=").concat(e);return I.get(t).then(function(e){if(e.hasOwnProperty("message"))throw new Error(e.message);return e.map(function(e){var t=e.id,a=e.body,n=e.postId,r=e.authorId,s=e.authorName,l=e.dateCreated,c=new Date(l).getTime()+72e5;return new Ne(t,a,n,r,s,new Date(c))})})}},{key:"addComment",value:function(e){return I.post(O,e)}}]),e}()),ke=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).getInputValue=function(e){var t;t=!e.target.value.includes("http")&&e.target.value.length>=3&&!e.target.value.includes("<")&&!e.target.value.includes("www")?{inputValue:e.target.value,buttonClass:"btn button-active"}:{inputValue:e.target.value,buttonClass:"btn button-active disabled"},a.setState(t)},a.onCreateCommentHandler=function(){var e={body:a.state.inputValue,postId:a.state.postId};ye.addComment(e).then(function(e){a.props.loadComments()}),a.setState({inputValue:""})},a.state={postId:a.props.postId,inputValue:"",buttonClass:"btn button-active disabled"},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"mt-4 px-4 input-group-prepend"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Add your comment...",onChange:this.getInputValue,value:this.state.inputValue}),r.a.createElement("input",{type:"button",value:"SEND",className:this.state.buttonClass,onClick:this.onCreateCommentHandler}))}}]),t}(n.Component),we=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={comments:null},a.loadComments=a.loadComments.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"loadComments",value:function(){var e=this;ye.getComments(this.props.postId).then(function(t){e.setState({comments:t})}).catch(function(t){var a=t.message;e.props.history.push({pathname:"/error"}),console.error(a)})}},{key:"componentDidMount",value:function(){this.loadComments()}},{key:"render",value:function(){var e=this.state.comments;return e?r.a.createElement(n.Fragment,null,r.a.createElement(ke,{postId:this.props.postId,loadComments:this.loadComments}),r.a.createElement("hr",null),r.a.createElement("div",{className:"mx-5"},e.map(function(e){return r.a.createElement(Ee,{key:e.id,comment:e})}).reverse())):r.a.createElement(g,{className:"blue"})}}]),t}(n.Component),Ce=(a(57),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={post:a.props.post,userImg:"http://sg-fs.com/wp-content/uploads/2017/08/user-placeholder.png"},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;V.getSingleUser(this.state.post.userId).then(function(t){var a=t.image;return e.setState({userImg:a})})}},{key:"render",value:function(){var e=this.state,t=e.userImg,a=e.post;return r.a.createElement("div",{className:"px-3 pt-3"},r.a.createElement("h3",{className:"item-link fit-content",onClick:this.props.handleUserClick},r.a.createElement("img",{src:t,alt:"avatar",className:"post-img rounded-circle mr-1"}),a.userDisplayName),r.a.createElement("p",{className:"mb-0"},a.getFormatedDate(),", ",a.getFormatedTime()),r.a.createElement("small",null,a.getCapitalType()," Post"))}}]),t}(n.Component)),Oe=function(e){var t=e.post,a=t.imageUrl,n=t.videoUrl,s=t.text;return a?r.a.createElement("img",{className:"img-fluid rounded w-100",src:a,alt:"post"}):s?r.a.createElement("p",{className:"lead p-3"},s):n?r.a.createElement("div",{className:"embed-responsive embed-responsive-16by9 "},r.a.createElement("iframe",{className:"embed-responsive-item card-img-top",src:n,allowFullScreen:!0,title:"post video"})):null},je=function(e){var t=e.handleDelete;return r.a.createElement("span",{className:"btn text-secondary float-right m-2",onClick:t},r.a.createElement("i",{className:"fas fa-trash-alt",id:"delete"}))},xe=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={post:null,comments:null,errorAlert:"",successAlert:"",postId:a.props.location.state.id,postType:a.props.location.state.type},a.handleUserClick=a.handleUserClick.bind(Object(f.a)(Object(f.a)(a))),a.handleDelete=a.handleDelete.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleUserClick",value:function(){this.props.history.push({pathname:"/profile",state:{userId:this.state.post.userId}})}},{key:"handleDelete",value:function(){var e=this;Z.deletePost(this.state.postId).then(function(t){alert(t),e.props.history.push("/feed")}).catch(function(e){var t=e.message;alert(t)})}},{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.postId,n=t.postType;Z.getSinglePost(a,n).then(function(t){e.setState({post:t})}).catch(function(t){var a=t.message;e.props.history.push({pathname:"/error"}),console.error(a)})}},{key:"render",value:function(){var e=this.state,t=e.post,a=e.postId;return r.a.createElement("main",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-11"},t?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"bg-light rounded"},t.userId===parseInt(sessionStorage.getItem("userId"))?r.a.createElement(je,{handleDelete:this.handleDelete}):null,r.a.createElement(Ce,{post:t,handleUserClick:this.handleUserClick}),r.a.createElement("hr",{className:"m-0 mb-1"}),r.a.createElement(Oe,{post:t})),r.a.createElement("hr",null),r.a.createElement(we,{postId:a})):r.a.createElement(g,{className:"blue"}))))}}]),t}(n.Component);a(59),a(61),a(63),a(64),a(67),a(69);l.a.render(r.a.createElement(c.a,null,r.a.createElement(function(){return sessionStorage.getItem("sessionId")?r.a.createElement(n.Fragment,null,r.a.createElement(he,null),r.a.createElement(o.a,null,r.a.createElement(i.a,{path:"/post-details",component:xe}),r.a.createElement(i.a,{path:"/profile",component:ve}),r.a.createElement(i.a,{path:"/error",component:re}),r.a.createElement(i.a,{path:"/people",component:ue}),r.a.createElement(i.a,{path:"/feed",component:ae}),r.a.createElement(i.a,{path:"/",component:ae})),r.a.createElement(ge,null)):r.a.createElement(i.a,{path:"/",component:T})},null)),document.getElementById("root"))}},[[23,2,1]]]);
//# sourceMappingURL=main.ec365d72.chunk.js.map